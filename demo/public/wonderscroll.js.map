{"version":3,"file":"wonderscroll.js","sources":["../../src/defaults.js","../../src/utils.js","../../src/easing.js","../../src/Mutators/DefaultMutator.js","../../src/Mutators/TransformMutator.js","../../src/Mutators/ColorMutator.js","../../src/Mutators/Mutator.js","../../src/Observer.js","../../src/Wonderscroll.js"],"sourcesContent":["const ColorMutatorDefaults = {\r\n\tparams: {\r\n        unit: '',\r\n        ease: 'linear'\r\n\t}\r\n}\r\n\r\nconst MutatorDefaults = {\r\n\tparams: {\r\n\t\tunit: 'px',\r\n\t\tease: 'linear'\r\n\t}\r\n}\r\n\r\nconst ObserverDefaults = {\r\n\tparams: {\r\n\t\tname: undefined,\r\n\t\troot: 'window',\r\n\t\tfrom: 1,\r\n\t\tto: 0,\r\n\t\tedge: 'top',\r\n\t\tupdateOnInit: true,\r\n\t\tupdateOnRootResize: true,\r\n\t\tdirection: 'vertical'\r\n\t}\r\n}\r\n\r\nconst WonderscrollDefaults = {\r\n\tobservers: ObserverDefaults,\r\n\tparams: {\r\n        init: true,\r\n        observerNamePrefix: 'observer',\r\n        defaultElement: '.wonderscroll',\r\n\t}\r\n}\r\n\r\nexport {\r\n    WonderscrollDefaults,\r\n    ObserverDefaults,\r\n    MutatorDefaults,\r\n    ColorMutatorDefaults\r\n}","const _ = {\r\n    each(enumerable, callback) {\r\n        const array = this.isPlainObject(enumerable) ? Object.keys(enumerable) : this.forceArray(enumerable);\r\n        array.forEach(callback);\r\n    },\r\n    forceArray(value) {\r\n        return Array.isArray(value) ? value : [value]\r\n    },\r\n    merge(...args) {\r\n        let target = {};\r\n        args.forEach(arg => {\r\n            target = {\r\n                ...target,\r\n                ...arg\r\n            }\r\n        });\r\n        return target;\r\n    },\r\n    queryElement(element) {\r\n        let el;\r\n        try {\r\n            if (element instanceof Element) {\r\n                el = element;\r\n            }\r\n            else if (typeof element === 'string') {\r\n                el = document.querySelectorAll(element);\r\n                if (el === null) {\r\n                    throw `Element Not Found: Could not find Element with ${element} selector.`;\r\n                }\r\n            }\r\n            else {\r\n                throw 'Invalid Element Property: Should be HTMLElement or valid selector.';\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n        return el;\r\n    },\r\n    isObject(value) {\r\n        return value instanceof Object && value !== null;\r\n    },\r\n    isPlainObject(value) {\r\n        return !!value.constructor && value.constructor === Object;\r\n    }\r\n}\r\n\r\nexport default _;","/*\r\n * Easing Functions - inspired from http://gizma.com/easing/\r\n * only considering the t value for the range [0, 1] => [0, 1]\r\n */\r\nexport default {\r\n    // no easing, no acceleration\r\n    linear: t => t,\r\n    // accelerating from zero velocity\r\n    InQuad: t => t*t,\r\n    // decelerating to zero velocity\r\n    OutQuad: t => t*(2-t),\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuad: t => t<.5 ? 2*t*t : -1+(4-2*t)*t,\r\n    // accelerating from zero velocity \r\n    InCubic: t => t*t*t,\r\n    // decelerating to zero velocity \r\n    OutCubic: t => (--t)*t*t+1,\r\n    // acceleration until halfway, then deceleration \r\n    InOutCubic: t => t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1,\r\n    // accelerating from zero velocity \r\n    InQuart: t => t*t*t*t,\r\n    // decelerating to zero velocity \r\n    OutQuart: t => 1-(--t)*t*t*t,\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuart: t => t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t,\r\n    // accelerating from zero velocity\r\n    InQuint: t => t*t*t*t*t,\r\n    // decelerating to zero velocity\r\n    OutQuint: t => 1+(--t)*t*t*t*t,\r\n    // acceleration until halfway, then deceleration \r\n    InOutQuint: t => t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t\r\n  }","import { MutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils'; \r\nimport easing from '../easing'; \r\n\r\nclass DefaultMutator {\r\n    constructor(element, key, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.key = key;\r\n        w.cssProperty = key;\r\n        w.ease = undefined;\r\n        w.value = '';\r\n\r\n        w.init();\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        return w.value + w.params.unit;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.params.from + (w.params.to - w.params.from) * w.ease(progress);\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n    }\r\n\r\n    _initEase() {\r\n        const w = this;\r\n        const easeFx = easing[w.params.ease];\r\n        w.ease = !!easeFx ? easeFx : easing.linear;\r\n    }\r\n}\r\n\r\nexport default DefaultMutator;","import DefaultMutator from './DefaultMutator';\r\n\r\nclass TransformMutator extends DefaultMutator {\r\n    constructor(element, key, options) {\r\n        super(element, key, options);\r\n        const w = this;\r\n        w.cssProperty = 'transform';\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const format = TransformMutator.format[w.key];\r\n        return format.replace('$', w.value + w.params.unit);\r\n    }\r\n}\r\n\r\nTransformMutator.format = {\r\n    y: 'translateY($)',\r\n    x: 'translateX($)',\r\n    z: 'translateZ($)',\r\n    r: 'rotate($)',\r\n    scale: 'scale($)'\r\n}\r\n\r\nexport default TransformMutator;","import { ColorMutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils';\r\nimport DefaultMutator from './DefaultMutator';\r\n\r\n\r\nclass ColorMutator extends DefaultMutator {\r\n    constructor(element, key, params) {\r\n        params = _.merge(defaults.params, params);\r\n        super(element, key, params);\r\n        const w = this;\r\n        w.value = [null, null, null, null];\r\n        \r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const mode = w.value.length === 4 ? 'rgba' : 'rgb';\r\n        const alpha = mode === 'rgba' ? ', ' + w.value[3] : '';\r\n        return `${mode}(${w.value[0]}, ${w.value[1]}, ${w.value[2]}${alpha})`;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.value.map((value, i) => {\r\n            const from = w.colors.from[i];\r\n            const to = w.colors.to[i];\r\n            return from + (to - from) * w.ease(progress)\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n        w._initColors();\r\n    }\r\n\r\n    _initColors() {\r\n        const w = this;\r\n        w.colors = {\r\n            from: ColorMutator.toRGB(w.params.from),\r\n            to: ColorMutator.toRGB(w.params.to)\r\n        }\r\n    }\r\n\r\n    static toRGB(string) {\r\n        let color;\r\n        const mode = ColorMutator.getMode(string);\r\n        switch (mode) {\r\n            case 'hex':\r\n                color = ColorMutator.fromHex(string);\r\n                break;\r\n            case 'hsl':\r\n                color = ColorMutator.fromHSL(string);\r\n                break;\r\n            case 'rgb':\r\n                color = ColorMutator.fromRGB(string);\r\n                break;\r\n            default:\r\n                throw `Mode not found in '${color}. Try supported color modes: hex, rgb. (hsl coming soon)`;\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static fromHex(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hex') {\r\n                const startIndex = color.search(/(?:#|0x)/) + 1;\r\n                const hex = color.slice(startIndex);\r\n                const values = hex.match(/.{2}/g);\r\n                rgb = [\r\n                    parseInt(values[0], 16),\r\n                    parseInt(values[1], 16),\r\n                    parseInt(values[2], 16),\r\n                    1\r\n                ];\r\n            } else {\r\n                throw `Hex string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromRGB(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'rgb') {\r\n                const startIndex = color.indexOf('(') + 1;\r\n                const endIndex = color.indexOf(')');\r\n                rgb = color.slice(startIndex, endIndex).split(',').map(v => Number(v));\r\n            } else {\r\n                throw `RGB string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromHSL(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hsl') {\r\n                throw `HSL is not supported yet.`\r\n            } else {\r\n                throw `HSL string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static getMode(string) {\r\n        const mode =\r\n            string.search(/(?:#|0x)/) !== -1 ? 'hex' :\r\n                string.search(/hsl/) !== -1 ? 'hsl' :\r\n                    string.search(/rgb/) !== -1 ? 'rgb' : false;\r\n        return mode;\r\n    }\r\n\r\n    static matchColor(string) {\r\n        const regex = /(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)/ig;\r\n        const match = !!string.match(regex) ? string.match(regex)[0] : null;\r\n        return match;\r\n    }\r\n}\r\n\r\nexport default ColorMutator;","import DefaultMutator from './DefaultMutator';\r\nimport TransformMutator from './TransformMutator';\r\nimport ColorMutator from './ColorMutator';\r\n\r\nclass Mutator {\r\n    constructor(element, key, params) {\r\n        const mutatorType = Mutator.mutatorTypes[key];\r\n\r\n        switch (mutatorType) {\r\n            case 'transform':\r\n                return new TransformMutator(element, key, params);     \r\n            case 'color':\r\n                return new ColorMutator(element, key, params);\r\n            default:\r\n                return new DefaultMutator(element, key, params);\r\n        }\r\n    }\r\n}\r\n\r\nMutator.mutatorTypes = {\r\n    y: 'transform',\r\n    x: 'transform',\r\n    z: 'transform',\r\n    rotate: 'transform',\r\n    scale: 'transform',\r\n    color: 'color',\r\n    backgroundColor: 'color',\r\n    borderColor: 'color'\r\n}\r\n\r\nexport default Mutator;","import { ObserverDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Mutator from './Mutators/Mutator';\r\n\r\nclass Observer {\r\n    constructor(element, mutators, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.queue = {\r\n            mutators: mutators || {}\r\n        }\r\n        w.mutators = {};\r\n        w.scroll = {\r\n            current: 0,\r\n            start: undefined,\r\n            end: undefined,\r\n            diff: undefined,\r\n            progress: 0\r\n        };\r\n\r\n        this.isDone = true;\r\n        this.isIntersecting = false;\r\n        this.isListeningScroll = false;\r\n        this.scrollHandler = this._handleScroll.bind(this);\r\n        this.raf = 0;\r\n        \r\n        this.intersectionObserver = new IntersectionObserver((e) => this._handleIntersecting(!!e[0].isIntersecting));\r\n        this.intersectionObserver.observe(this.element);\r\n\r\n        w.init();\r\n    }\r\n\r\n    get progress() {\r\n        const w = this;\r\n        const progress = Math.min(Math.max((Math.round(w.scroll.current) - w.scroll.start) / w.scroll.diff, 0), 1);\r\n        return progress;\r\n    }\r\n\r\n    update(key) {\r\n        const w = this;\r\n        if (key !== undefined && key instanceof String) {\r\n            w.getMutation(key);\r\n        } else {\r\n            w.getMutations();\r\n        }\r\n        w.applyMutations();\r\n    }\r\n\r\n    applyMutations() {\r\n        const w = this;\r\n        const styles = {};\r\n        _.each(w.mutators, key => {\r\n            const mutator = w.mutators[key];\r\n            styles[mutator.cssProperty] = styles[mutator.cssProperty] || [];\r\n            styles[mutator.cssProperty].push(mutator.style);\r\n        });\r\n        _.each(styles, cssProperty => {\r\n            const style = styles[cssProperty].join(' ');\r\n            w.element.style[cssProperty] = style;\r\n        });\r\n        w.isDone = w.progress == 0 || w.progress == 1;\r\n    }\r\n\r\n    getMutation(key) {\r\n        const w = this;\r\n        w.mutators[key].tween(w.progress);\r\n    }\r\n\r\n    getMutations() {\r\n        const w = this;\r\n        _.each(w.mutators, key => {\r\n            w.getMutation(key);\r\n        });\r\n        w.applyMutations();\r\n    }\r\n\r\n    addMutator(key, params) {\r\n        const w = this;\r\n        try {\r\n            if (w.mutators[key] === undefined) {\r\n                w.mutators[key] = new Mutator(w.element, key, params);\r\n            } else {\r\n                throw `Mutator '${key}' already exist on '${w.name}' observer. Try update() instead`;\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    addMutators(mutators) {\r\n        const w = this;\r\n        _.each(mutators, key => {\r\n            w.addMutator(key, mutators[key]);\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initScroll();\r\n        w._initMutators();\r\n    }\r\n\r\n    _initMutators() {\r\n        const w = this;\r\n        w.addMutators(w.queue.mutators);\r\n        w.queue.mutators = {};\r\n\r\n        if (!!w.params.updateOnInit) {\r\n            w.update();    \r\n        }\r\n    }\r\n\r\n    _initScroll() {\r\n        const w = this;\r\n\r\n        const elementHeight = w.element.offsetHeight;\r\n        const viewportHeight = document.body.clientHeight;\r\n\r\n        const startEdgeDistance = w.params.edge === 'bottom' ? elementHeight : 0;\r\n        const endEgdeDistance =  w.params.edge === 'both' ? elementHeight : 0;\r\n        const startDistance = w.element.offsetTop + startEdgeDistance;\r\n\r\n        const start = Math.floor(startDistance - viewportHeight * w.params.from);\r\n        const end = Math.ceil(startDistance + endEgdeDistance - viewportHeight * w.params.to);\r\n\r\n        w.scroll = {\r\n            current: window.scrollY || 0,\r\n            start: start,\r\n            end: end,\r\n            diff: end - start\r\n        }\r\n    }\r\n\r\n    _handleIntersecting(value) {\r\n        const w = this;\r\n        const isIntersecting = !!value;\r\n        if (isIntersecting && !w.isListeningScroll) {\r\n            w.isListeningScroll = true;\r\n            window.addEventListener('scroll', w.scrollHandler);\r\n        }\r\n        w.isIntersecting = isIntersecting;\r\n    }\r\n\r\n    _handleScroll() {\r\n        const w = this;\r\n        w.scroll.current = window.scrollY;\r\n        const progress = w.progress\r\n        \r\n        if ((progress > 0 && progress < 1) || !w.isDone) {\r\n            window.cancelAnimationFrame(w.raf);\r\n            w.raf = window.requestAnimationFrame(w.update.bind(w));\r\n        }\r\n        else if (!w.isIntersecting) {\r\n            w.isListeningScroll = false;\r\n            window.removeEventListener('scroll', w.scrollHandler);\r\n        }\r\n    }   \r\n}\r\n\r\nexport default Observer;","import { WonderscrollDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Observer from './Observer';\r\n\r\nclass Wonderscroll {\r\n\r\n    constructor(...args) {\r\n        const w = this;\r\n        let element;\r\n        let observers;\r\n        let params;\r\n\r\n        if (args.length < 3 && args[0].constructor && (args[0].constructor == Object || args[0].constructor === Array)) {\r\n            [observers, params] = args;\r\n        } else {\r\n            [element, observers, params] = args;\r\n        }\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.queue = {\r\n            element: element || params.defaultElement,\r\n            observers: _.forceArray(_.merge(defaults.observers, observers))\r\n        }\r\n        w.element = undefined;\r\n        w.observers = [];\r\n        w.isInited = false;\r\n\r\n        if (!!w.params.init) {\r\n            w.init();\r\n        }\r\n    }\r\n\r\n    addObserver(mutators, params) {\r\n        const w = this;\r\n        const target = w.isInited ? w.observers : w.queue.observers;\r\n        \r\n        const hasCustomName = !!params && !!params.name && typeof params.name === 'string';\r\n        const genericName = String(w.params.observerNamePrefix) + w.observers.length;\r\n        params.name = hasCustomName ? params.name : genericName;\r\n        const observer = new Observer(w.element, mutators, params);\r\n            \r\n        target.push(observer);    \r\n    }\r\n\r\n    addObservers(observers) {\r\n        const w = this;\r\n        _.each(observers, observer => {\r\n            w.addObserver(observer.mutators, observer.params);\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initElement();\r\n        w._initObservers();\r\n        w.isInited = true;\r\n    }\r\n\r\n    _initElement() {\r\n        const w = this;\r\n        w.element = _.queryElement(w.queue.element);\r\n        w.queue.element = undefined;\r\n    }\r\n\r\n    _initObservers() {\r\n        const w = this;\r\n        w.addObservers(w.queue.observers);\r\n        w.queue.observers = [];\r\n    }\r\n}\r\n\r\nexport default Wonderscroll;"],"names":["ColorMutatorDefaults","params","unit","ease","MutatorDefaults","ObserverDefaults","name","undefined","root","from","to","edge","updateOnInit","updateOnRootResize","direction","WonderscrollDefaults","observers","init","observerNamePrefix","defaultElement","_","each","enumerable","callback","array","isPlainObject","Object","keys","forceArray","forEach","value","Array","isArray","merge","target","args","arg","queryElement","element","el","Element","document","querySelectorAll","error","console","isObject","constructor","linear","t","InQuad","OutQuad","InOutQuad","InCubic","OutCubic","InOutCubic","InQuart","OutQuart","InOutQuart","InQuint","OutQuint","InOutQuint","DefaultMutator","key","w","defaults","cssProperty","progress","_initEase","easeFx","easing","TransformMutator","options","format","replace","y","x","z","r","scale","ColorMutator","map","i","colors","_initColors","toRGB","mode","length","alpha","string","color","getMode","fromHex","fromHSL","fromRGB","rgb","matchColor","startIndex","search","hex","slice","values","match","parseInt","indexOf","endIndex","split","v","Number","regex","Mutator","mutatorType","mutatorTypes","rotate","backgroundColor","borderColor","Observer","mutators","queue","scroll","current","start","end","diff","isDone","isIntersecting","isListeningScroll","scrollHandler","_handleScroll","bind","raf","intersectionObserver","IntersectionObserver","e","_handleIntersecting","observe","String","getMutation","getMutations","applyMutations","styles","mutator","push","style","join","tween","addMutator","_initScroll","_initMutators","addMutators","update","elementHeight","offsetHeight","viewportHeight","body","clientHeight","startEdgeDistance","endEgdeDistance","startDistance","offsetTop","Math","floor","ceil","window","scrollY","addEventListener","cancelAnimationFrame","requestAnimationFrame","removeEventListener","min","max","round","Wonderscroll","isInited","hasCustomName","genericName","observer","addObserver","_initElement","_initObservers","addObservers"],"mappings":"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"}