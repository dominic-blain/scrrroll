{"version":3,"file":"wonderscroll.js","sources":["../../src/defaults.js","../../src/utils.js","../../src/easing.js","../../src/Mutators/DefaultMutator.js","../../src/Mutators/TransformMutator.js","../../src/Mutators/ColorMutator.js","../../src/Mutators/Mutator.js","../../src/Observer.js","../../src/Wonderscroll.js"],"sourcesContent":["const ColorMutatorDefaults = {\r\n\tparams: {\r\n        unit: '',\r\n        ease: 'linear'\r\n\t}\r\n}\r\n\r\nconst MutatorDefaults = {\r\n\tparams: {\r\n\t\tunit: 'px',\r\n\t\tease: 'linear'\r\n\t}\r\n}\r\n\r\nconst ObserverDefaults = {\r\n\tparams: {\r\n\t\tname: undefined,\r\n\t\troot: 'window',\r\n\t\tfrom: 1,\r\n\t\tto: 0,\r\n\t\tedge: 'top',\r\n\t\tupdateOnInit: true,\r\n\t\tupdateOnRootResize: true,\r\n\t\tdirection: 'vertical'\r\n\t}\r\n}\r\n\r\nconst WonderscrollDefaults = {\r\n\tobservers: ObserverDefaults,\r\n\tparams: {\r\n        init: true,\r\n        observerNamePrefix: 'observer',\r\n        defaultElement: '.wonderscroll',\r\n\t}\r\n}\r\n\r\nexport {\r\n    WonderscrollDefaults,\r\n    ObserverDefaults,\r\n    MutatorDefaults,\r\n    ColorMutatorDefaults\r\n}","const _ = {\r\n    each(enumerable, callback) {\r\n        const array = this.isPlainObject(enumerable) ? Object.keys(enumerable) : this.forceArray(enumerable);\r\n        array.forEach(item => callback(item));\r\n    },\r\n    forceArray(value) {\r\n        return Array.isArray(value) ? value : [value]\r\n    },\r\n    merge(...args) {\r\n        let target = {};\r\n        args.forEach(arg => {\r\n            target = {\r\n                ...target,\r\n                ...arg\r\n            }\r\n        });\r\n        return target;\r\n    },\r\n    queryElement(element) {\r\n        let el;\r\n        try {\r\n            if (element instanceof Element) {\r\n                el = element;\r\n            }\r\n            else if (typeof element === 'string') {\r\n                el = document.querySelectorAll(element);\r\n                if (el === null || el.length === 0) {\r\n                    throw `Element Not Found: Could not find Element with ${element} selector.`;\r\n                }\r\n            }\r\n            else {\r\n                throw 'Invalid Element Property: Should be HTMLElement or valid selector.';\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n        return el;\r\n    },\r\n    isObject(value) {\r\n        return value instanceof Object && value !== null;\r\n    },\r\n    isPlainObject(value) {\r\n        return !!value.constructor && value.constructor === Object;\r\n    },\r\n    isPlainArray(value) {\r\n        return !!value.constructor && value.constructor === Array;\r\n    }\r\n}\r\n\r\nexport default _;","/*\r\n * Easing Functions - inspired from http://gizma.com/easing/\r\n * only considering the t value for the range [0, 1] => [0, 1]\r\n */\r\nexport default {\r\n    // no easing, no acceleration\r\n    linear: t => t,\r\n    // accelerating from zero velocity\r\n    InQuad: t => t*t,\r\n    // decelerating to zero velocity\r\n    OutQuad: t => t*(2-t),\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuad: t => t<.5 ? 2*t*t : -1+(4-2*t)*t,\r\n    // accelerating from zero velocity \r\n    InCubic: t => t*t*t,\r\n    // decelerating to zero velocity \r\n    OutCubic: t => (--t)*t*t+1,\r\n    // acceleration until halfway, then deceleration \r\n    InOutCubic: t => t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1,\r\n    // accelerating from zero velocity \r\n    InQuart: t => t*t*t*t,\r\n    // decelerating to zero velocity \r\n    OutQuart: t => 1-(--t)*t*t*t,\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuart: t => t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t,\r\n    // accelerating from zero velocity\r\n    InQuint: t => t*t*t*t*t,\r\n    // decelerating to zero velocity\r\n    OutQuint: t => 1+(--t)*t*t*t*t,\r\n    // acceleration until halfway, then deceleration \r\n    InOutQuint: t => t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t\r\n  }","import { MutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils'; \r\nimport easing from '../easing'; \r\n\r\nclass DefaultMutator {\r\n    constructor(element, key, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.key = key;\r\n        w.cssProperty = key;\r\n        w.ease = undefined;\r\n        w.value = '';\r\n\r\n        w.init();\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        return w.value + w.params.unit;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.params.from + (w.params.to - w.params.from) * w.ease(progress);\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n    }\r\n\r\n    _initEase() {\r\n        const w = this;\r\n        const easeFx = easing[w.params.ease];\r\n        w.ease = !!easeFx ? easeFx : easing.linear;\r\n    }\r\n}\r\n\r\nexport default DefaultMutator;","import DefaultMutator from './DefaultMutator';\r\n\r\nclass TransformMutator extends DefaultMutator {\r\n    constructor(element, key, options) {\r\n        super(element, key, options);\r\n        const w = this;\r\n        w.cssProperty = 'transform';\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const format = TransformMutator.format[w.key];\r\n        return format.replace('$', w.value + w.params.unit);\r\n    }\r\n}\r\n\r\nTransformMutator.format = {\r\n    y: 'translateY($)',\r\n    x: 'translateX($)',\r\n    z: 'translateZ($)',\r\n    r: 'rotate($)',\r\n    scale: 'scale($)'\r\n}\r\n\r\nexport default TransformMutator;","import { ColorMutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils';\r\nimport DefaultMutator from './DefaultMutator';\r\n\r\n\r\nclass ColorMutator extends DefaultMutator {\r\n    constructor(element, key, params) {\r\n        params = _.merge(defaults.params, params);\r\n        super(element, key, params);\r\n        const w = this;\r\n        w.value = [null, null, null, null];\r\n        \r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const mode = w.value.length === 4 ? 'rgba' : 'rgb';\r\n        const alpha = mode === 'rgba' ? ', ' + w.value[3] : '';\r\n        return `${mode}(${w.value[0]}, ${w.value[1]}, ${w.value[2]}${alpha})`;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.value.map((value, i) => {\r\n            const from = w.colors.from[i];\r\n            const to = w.colors.to[i];\r\n            return from + (to - from) * w.ease(progress)\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n        w._initColors();\r\n    }\r\n\r\n    _initColors() {\r\n        const w = this;\r\n        w.colors = {\r\n            from: ColorMutator.toRGB(w.params.from),\r\n            to: ColorMutator.toRGB(w.params.to)\r\n        }\r\n    }\r\n\r\n    static toRGB(string) {\r\n        let color;\r\n        const mode = ColorMutator.getMode(string);\r\n        switch (mode) {\r\n            case 'hex':\r\n                color = ColorMutator.fromHex(string);\r\n                break;\r\n            case 'hsl':\r\n                color = ColorMutator.fromHSL(string);\r\n                break;\r\n            case 'rgb':\r\n                color = ColorMutator.fromRGB(string);\r\n                break;\r\n            default:\r\n                throw `Mode not found in '${color}. Try supported color modes: hex, rgb. (hsl coming soon)`;\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static fromHex(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hex') {\r\n                const startIndex = color.search(/(?:#|0x)/) + 1;\r\n                const hex = color.slice(startIndex);\r\n                const values = hex.match(/.{2}/g);\r\n                rgb = [\r\n                    parseInt(values[0], 16),\r\n                    parseInt(values[1], 16),\r\n                    parseInt(values[2], 16),\r\n                    1\r\n                ];\r\n            } else {\r\n                throw `Hex string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromRGB(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'rgb') {\r\n                const startIndex = color.indexOf('(') + 1;\r\n                const endIndex = color.indexOf(')');\r\n                rgb = color.slice(startIndex, endIndex).split(',').map(v => Number(v));\r\n            } else {\r\n                throw `RGB string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromHSL(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hsl') {\r\n                throw `HSL is not supported yet.`\r\n            } else {\r\n                throw `HSL string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static getMode(string) {\r\n        const mode =\r\n            string.search(/(?:#|0x)/) !== -1 ? 'hex' :\r\n                string.search(/hsl/) !== -1 ? 'hsl' :\r\n                    string.search(/rgb/) !== -1 ? 'rgb' : false;\r\n        return mode;\r\n    }\r\n\r\n    static matchColor(string) {\r\n        const regex = /(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)/ig;\r\n        const match = !!string.match(regex) ? string.match(regex)[0] : null;\r\n        return match;\r\n    }\r\n}\r\n\r\nexport default ColorMutator;","import DefaultMutator from './DefaultMutator';\r\nimport TransformMutator from './TransformMutator';\r\nimport ColorMutator from './ColorMutator';\r\n\r\nclass Mutator {\r\n    constructor(element, key, params) {\r\n        const mutatorType = Mutator.mutatorTypes[key];\r\n\r\n        switch (mutatorType) {\r\n            case 'transform':\r\n                return new TransformMutator(element, key, params);     \r\n            case 'color':\r\n                return new ColorMutator(element, key, params);\r\n            default:\r\n                return new DefaultMutator(element, key, params);\r\n        }\r\n    }\r\n}\r\n\r\nMutator.mutatorTypes = {\r\n    y: 'transform',\r\n    x: 'transform',\r\n    z: 'transform',\r\n    rotate: 'transform',\r\n    scale: 'transform',\r\n    color: 'color',\r\n    backgroundColor: 'color',\r\n    borderColor: 'color'\r\n}\r\n\r\nexport default Mutator;","import { ObserverDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Mutator from './Mutators/Mutator';\r\n\r\nclass Observer {\r\n    constructor(element, mutators, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.queue = {\r\n            mutators: mutators || {}\r\n        }\r\n        w.mutators = {};\r\n        w.scroll = {\r\n            current: 0,\r\n            start: undefined,\r\n            end: undefined,\r\n            diff: undefined,\r\n            progress: 0\r\n        };\r\n\r\n        this.isDone = true;\r\n        this.isIntersecting = false;\r\n        this.isListeningScroll = false;\r\n        this.scrollHandler = this._handleScroll.bind(this);\r\n        this.raf = 0;\r\n        \r\n        this.intersectionObserver = new IntersectionObserver((e) => this._handleIntersecting(!!e[0].isIntersecting));\r\n        this.intersectionObserver.observe(this.element);\r\n\r\n        w.init();\r\n    }\r\n\r\n    get progress() {\r\n        const w = this;\r\n        const progress = Math.min(Math.max((Math.round(w.scroll.current) - w.scroll.start) / w.scroll.diff, 0), 1);\r\n        return progress;\r\n    }\r\n\r\n    update(key) {\r\n        const w = this;\r\n        if (key !== undefined && key instanceof String) {\r\n            w.getMutation(key);\r\n        } else {\r\n            w.getMutations();\r\n        }\r\n        w.applyMutations();\r\n    }\r\n\r\n    applyMutations() {\r\n        const w = this;\r\n        const styles = {};\r\n        _.each(w.mutators, key => {\r\n            const mutator = w.mutators[key];\r\n            styles[mutator.cssProperty] = styles[mutator.cssProperty] || [];\r\n            styles[mutator.cssProperty].push(mutator.style);\r\n        });\r\n        _.each(styles, cssProperty => {\r\n            const style = styles[cssProperty].join(' ');\r\n            w.element.style[cssProperty] = style;\r\n        });\r\n        w.isDone = w.progress == 0 || w.progress == 1;\r\n    }\r\n\r\n    getMutation(key) {\r\n        const w = this;\r\n        w.mutators[key].tween(w.progress);\r\n    }\r\n\r\n    getMutations() {\r\n        const w = this;\r\n        _.each(w.mutators, key => {\r\n            w.getMutation(key);\r\n        });\r\n    }\r\n\r\n    addMutator(key, params) {\r\n        const w = this;\r\n        try {\r\n            if (w.mutators[key] === undefined) {\r\n                w.mutators[key] = new Mutator(w.element, key, params);\r\n            } else {\r\n                throw `Mutator '${key}' already exist on '${w.name}' observer. Try update() instead`;\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    addMutators(mutators) {\r\n        const w = this;\r\n        _.each(mutators, key => {\r\n            w.addMutator(key, mutators[key]);\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initScroll();\r\n        w._initMutators();\r\n    }\r\n\r\n    _initMutators() {\r\n        const w = this;\r\n        w.addMutators(w.queue.mutators);\r\n        w.queue.mutators = {};\r\n\r\n        if (!!w.params.updateOnInit) {\r\n            w.update();    \r\n        }\r\n    }\r\n\r\n    _initScroll() {\r\n        const w = this;\r\n\r\n        const elementHeight = w.element.offsetHeight;\r\n        const viewportHeight = document.body.clientHeight;\r\n\r\n        const startEdgeDistance = w.params.edge === 'bottom' ? elementHeight : 0;\r\n        const endEgdeDistance =  w.params.edge === 'both' ? elementHeight : 0;\r\n        const startDistance = w.element.offsetTop + startEdgeDistance;\r\n\r\n        const start = Math.floor(startDistance - viewportHeight * w.params.from);\r\n        const end = Math.ceil(startDistance + endEgdeDistance - viewportHeight * w.params.to);\r\n\r\n        w.scroll = {\r\n            current: window.scrollY || 0,\r\n            start: start,\r\n            end: end,\r\n            diff: end - start\r\n        }\r\n    }\r\n\r\n    _handleIntersecting(value) {\r\n        const w = this;\r\n        const isIntersecting = !!value;\r\n        if (isIntersecting && !w.isListeningScroll) {\r\n            w.isListeningScroll = true;\r\n            window.addEventListener('scroll', w.scrollHandler);\r\n        }\r\n        w.isIntersecting = isIntersecting;\r\n    }\r\n\r\n    _handleScroll() {\r\n        const w = this;\r\n        w.scroll.current = window.scrollY;\r\n        const progress = w.progress\r\n        \r\n        if ((progress > 0 && progress < 1) || !w.isDone) {\r\n            window.cancelAnimationFrame(w.raf);\r\n            w.raf = window.requestAnimationFrame(w.update.bind(w));\r\n        }\r\n        else if (!w.isIntersecting) {\r\n            w.isListeningScroll = false;\r\n            window.removeEventListener('scroll', w.scrollHandler);\r\n        }\r\n    }   \r\n}\r\n\r\nexport default Observer;","import { WonderscrollDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Observer from './Observer';\r\n\r\nclass Wonderscroll {\r\n\r\n    constructor(...args) {\r\n        const w = this;\r\n        let element;\r\n        let observers;\r\n        let params;\r\n\r\n        if (args.length < 3 && (_.isPlainObject(args[0]) || _.isPlainArray(args[0]))) {\r\n            [observers, params] = args;\r\n        } else {\r\n            [element, observers, params] = args;\r\n        }\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.queue = {\r\n            element: element || w.params.defaultElement,\r\n            observers: _.forceArray(observers).map(observer => {\r\n                return _.merge(defaults.observers, observer)\r\n            })\r\n        }\r\n        w.element = undefined;\r\n        w.observers = [];\r\n        w.isInited = false;\r\n\r\n        if (!!w.params.init) {\r\n            const initElement = w.init();\r\n            if (!!initElement && initElement.length > 1) {\r\n                return initElement;\r\n            }\r\n        }\r\n    }\r\n\r\n    addObserver(mutators, params) {\r\n        const w = this;\r\n        const target = w.isInited ? w.observers : w.queue.observers;\r\n        \r\n        const hasCustomName = !!params && !!params.name && typeof params.name === 'string';\r\n        const genericName = String(w.params.observerNamePrefix) + w.observers.length;\r\n        params.name = hasCustomName ? params.name : genericName;\r\n        const observer = new Observer(w.element, mutators, params);\r\n            \r\n        target.push(observer);    \r\n    }\r\n\r\n    addObservers(observers) {\r\n        const w = this;\r\n        _.each(observers, observer => {\r\n            w.addObserver(observer.mutators, observer.params);\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initElement();\r\n        if (w.element.length > 1) {\r\n            const elements = [];\r\n            w.element.forEach(el => {\r\n                elements.push(new Wonderscroll(el, w.queue.observers, w.params));\r\n            });\r\n            return elements;\r\n        }\r\n        w._initObservers();\r\n        w.isInited = true;\r\n    }\r\n\r\n    _initElement() {\r\n        const w = this;\r\n        const element = _.queryElement(w.queue.element);\r\n        \r\n        w.element = element;\r\n        w.queue.element = undefined;\r\n    }\r\n\r\n    _initObservers() {\r\n        const w = this;\r\n        w.addObservers(w.queue.observers);\r\n        w.queue.observers = [];\r\n    }\r\n}\r\n\r\nexport default Wonderscroll;"],"names":["ColorMutatorDefaults","params","unit","ease","MutatorDefaults","ObserverDefaults","name","undefined","root","from","to","edge","updateOnInit","updateOnRootResize","direction","WonderscrollDefaults","observers","init","observerNamePrefix","defaultElement","_","each","enumerable","callback","array","isPlainObject","Object","keys","forceArray","forEach","item","value","Array","isArray","merge","target","args","arg","queryElement","element","el","Element","document","querySelectorAll","length","error","console","isObject","constructor","isPlainArray","linear","t","InQuad","OutQuad","InOutQuad","InCubic","OutCubic","InOutCubic","InQuart","OutQuart","InOutQuart","InQuint","OutQuint","InOutQuint","DefaultMutator","key","w","defaults","cssProperty","progress","_initEase","easeFx","easing","TransformMutator","options","format","replace","y","x","z","r","scale","ColorMutator","map","i","colors","_initColors","toRGB","mode","alpha","string","color","getMode","fromHex","fromHSL","fromRGB","rgb","matchColor","startIndex","search","hex","slice","values","match","parseInt","indexOf","endIndex","split","v","Number","regex","Mutator","mutatorType","mutatorTypes","rotate","backgroundColor","borderColor","Observer","mutators","queue","scroll","current","start","end","diff","isDone","isIntersecting","isListeningScroll","scrollHandler","_handleScroll","bind","raf","intersectionObserver","IntersectionObserver","e","_handleIntersecting","observe","String","getMutation","getMutations","applyMutations","styles","mutator","push","style","join","tween","addMutator","_initScroll","_initMutators","addMutators","update","elementHeight","offsetHeight","viewportHeight","body","clientHeight","startEdgeDistance","endEgdeDistance","startDistance","offsetTop","Math","floor","ceil","window","scrollY","addEventListener","cancelAnimationFrame","requestAnimationFrame","removeEventListener","min","max","round","Wonderscroll","observer","isInited","initElement","hasCustomName","genericName","addObserver","_initElement","elements","_initObservers","addObservers"],"mappings":"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"}