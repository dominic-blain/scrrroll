{"version":3,"file":"wonderscroll.js","sources":["../../src/defaults.js","../../src/utils.js","../../src/easing.js","../../src/Mutators/DefaultMutator.js","../../src/Mutators/TransformMutator.js","../../src/Mutators/ColorMutator.js","../../src/Mutators/Mutator.js","../../src/Observer.js","../../src/Wonderscroll.js"],"sourcesContent":["const ColorMutatorDefaults = {\r\n\tparams: {\r\n        unit: '',\r\n        ease: 'linear'\r\n\t}\r\n}\r\n\r\nconst MutatorDefaults = {\r\n\tparams: {\r\n\t\tunit: 'px',\r\n\t\tease: 'linear'\r\n\t}\r\n}\r\n\r\nconst ObserverDefaults = {\r\n\tparams: {\r\n\t\tname: undefined,\r\n\t\troot: 'window',\r\n\t\tfrom: 1,\r\n\t\tto: 0,\r\n\t\tedge: 'top',\r\n\t\tdirection: 'vertical'\r\n\t}\r\n}\r\n\r\nconst WonderscrollDefaults = {\r\n\tobservers: ObserverDefaults,\r\n\tparams: {\r\n        init: true,\r\n        observerNamePrefix: 'observer',\r\n\t\tdefaultElement: '.wonderscroll',\r\n\t\tupdateOnInit: true,\r\n\t\tupdateOnResize: true,\r\n\t}\r\n}\r\n\r\nexport {\r\n    WonderscrollDefaults,\r\n    ObserverDefaults,\r\n    MutatorDefaults,\r\n    ColorMutatorDefaults\r\n}","const _ = {\r\n    each(enumerable, callback) {\r\n        const array = this.isPlainObject(enumerable) ? Object.keys(enumerable) : this.forceArray(enumerable);\r\n        array.forEach(item => callback(item));\r\n    },\r\n    forceArray(value) {\r\n        return Array.isArray(value) ? value : [value]\r\n    },\r\n    merge(...args) {\r\n        let target = {};\r\n        args.forEach(arg => {\r\n            target = {\r\n                ...target,\r\n                ...arg\r\n            }\r\n        });\r\n        return target;\r\n    },\r\n    queryElement(element) {\r\n        let el;\r\n        try {\r\n            if (element instanceof Element) {\r\n                el = element;\r\n            }\r\n            else if (typeof element === 'string') {\r\n                el = document.querySelectorAll(element);\r\n                if (el === null || el.length === 0) {\r\n                    throw `Element Not Found: Could not find Element with ${element} selector.`;\r\n                }\r\n            }\r\n            else {\r\n                throw 'Invalid Element Property: Should be HTMLElement or valid selector.';\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n        return el;\r\n    },\r\n    isObject(value) {\r\n        return value instanceof Object && value !== null;\r\n    },\r\n    isPlainObject(value) {\r\n        return !!value && !!value.constructor && value.constructor === Object;\r\n    },\r\n    isPlainArray(value) {\r\n        return !!value && !!value.constructor && value.constructor === Array;\r\n    }\r\n}\r\n\r\nexport default _;","/*\r\n * Easing Functions - inspired from http://gizma.com/easing/\r\n * only considering the t value for the range [0, 1] => [0, 1]\r\n */\r\nexport default {\r\n    // no easing, no acceleration\r\n    linear: t => t,\r\n    // accelerating from zero velocity\r\n    InQuad: t => t*t,\r\n    // decelerating to zero velocity\r\n    OutQuad: t => t*(2-t),\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuad: t => t<.5 ? 2*t*t : -1+(4-2*t)*t,\r\n    // accelerating from zero velocity \r\n    InCubic: t => t*t*t,\r\n    // decelerating to zero velocity \r\n    OutCubic: t => (--t)*t*t+1,\r\n    // acceleration until halfway, then deceleration \r\n    InOutCubic: t => t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1,\r\n    // accelerating from zero velocity \r\n    InQuart: t => t*t*t*t,\r\n    // decelerating to zero velocity \r\n    OutQuart: t => 1-(--t)*t*t*t,\r\n    // acceleration until halfway, then deceleration\r\n    InOutQuart: t => t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t,\r\n    // accelerating from zero velocity\r\n    InQuint: t => t*t*t*t*t,\r\n    // decelerating to zero velocity\r\n    OutQuint: t => 1+(--t)*t*t*t*t,\r\n    // acceleration until halfway, then deceleration \r\n    InOutQuint: t => t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t\r\n  }","import { MutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils'; \r\nimport easing from '../easing'; \r\n\r\nclass DefaultMutator {\r\n    constructor(element, key, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.key = key;\r\n        w.cssProperty = key;\r\n        w.ease = undefined;\r\n        w.value = '';\r\n\r\n        w.init();\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        return w.value + w.params.unit;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.params.from + (w.params.to - w.params.from) * w.ease(progress);\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n    }\r\n\r\n    _initEase() {\r\n        const w = this;\r\n        const easeFx = easing[w.params.ease];\r\n        w.ease = !!easeFx ? easeFx : easing.linear;\r\n    }\r\n}\r\n\r\nexport default DefaultMutator;","import DefaultMutator from './DefaultMutator';\r\n\r\nclass TransformMutator extends DefaultMutator {\r\n    constructor(element, key, options) {\r\n        super(element, key, options);\r\n        const w = this;\r\n        w.cssProperty = 'transform';\r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const customFormat = TransformMutator.format[w.key];\r\n        const format = !!customFormat ? customFormat : `${w.key}($)`;\r\n        return format.replace('$', w.value + w.params.unit);\r\n    }\r\n}\r\n\r\nTransformMutator.format = {\r\n    y: 'translateY($)',\r\n    x: 'translateX($)',\r\n    z: 'translateZ($)',\r\n    r: 'rotate($)'\r\n}\r\n\r\nexport default TransformMutator;","import { ColorMutatorDefaults as defaults } from '../defaults';\r\nimport _ from '../utils';\r\nimport DefaultMutator from './DefaultMutator';\r\n\r\n\r\nclass ColorMutator extends DefaultMutator {\r\n    constructor(element, key, params) {\r\n        params = _.merge(defaults.params, params);\r\n        super(element, key, params);\r\n        const w = this;\r\n        w.value = [null, null, null, null];\r\n        \r\n    }\r\n\r\n    get style() {\r\n        const w = this;\r\n        const mode = w.value.length === 4 ? 'rgba' : 'rgb';\r\n        const alpha = mode === 'rgba' ? ', ' + w.value[3] : '';\r\n        return `${mode}(${w.value[0]}, ${w.value[1]}, ${w.value[2]}${alpha})`;\r\n    }\r\n\r\n    tween(progress) {\r\n        const w = this;\r\n        w.value = w.value.map((value, i) => {\r\n            const from = w.colors.from[i];\r\n            const to = w.colors.to[i];\r\n            return from + (to - from) * w.ease(progress)\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initEase();\r\n        w._initColors();\r\n    }\r\n\r\n    _initColors() {\r\n        const w = this;\r\n        w.colors = {\r\n            from: ColorMutator.toRGB(w.params.from),\r\n            to: ColorMutator.toRGB(w.params.to)\r\n        }\r\n    }\r\n\r\n    static toRGB(string) {\r\n        let color;\r\n        const mode = ColorMutator.getMode(string);\r\n        switch (mode) {\r\n            case 'hex':\r\n                color = ColorMutator.fromHex(string);\r\n                break;\r\n            case 'hsl':\r\n                color = ColorMutator.fromHSL(string);\r\n                break;\r\n            case 'rgb':\r\n                color = ColorMutator.fromRGB(string);\r\n                break;\r\n            default:\r\n                throw `Mode not found in '${color}. Try supported color modes: hex, rgb. (hsl coming soon)`;\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static fromHex(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hex') {\r\n                const startIndex = color.search(/(?:#|0x)/) + 1;\r\n                const hex = color.slice(startIndex);\r\n                const values = hex.match(/.{2}/g);\r\n                rgb = [\r\n                    parseInt(values[0], 16),\r\n                    parseInt(values[1], 16),\r\n                    parseInt(values[2], 16),\r\n                    1\r\n                ];\r\n            } else {\r\n                throw `Hex string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromRGB(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'rgb') {\r\n                const startIndex = color.indexOf('(') + 1;\r\n                const endIndex = color.indexOf(')');\r\n                rgb = color.slice(startIndex, endIndex).split(',').map(v => Number(v));\r\n            } else {\r\n                throw `RGB string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static fromHSL(string) {\r\n        let rgb;\r\n        try {\r\n            const color = ColorMutator.matchColor(string);\r\n            const mode = ColorMutator.getMode(color);\r\n            if (!!color && mode === 'hsl') {\r\n                throw `HSL is not supported yet.`\r\n            } else {\r\n                throw `HSL string is invalid.`\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n        return rgb;\r\n    }\r\n\r\n    static getMode(string) {\r\n        const mode =\r\n            string.search(/(?:#|0x)/) !== -1 ? 'hex' :\r\n                string.search(/hsl/) !== -1 ? 'hsl' :\r\n                    string.search(/rgb/) !== -1 ? 'rgb' : false;\r\n        return mode;\r\n    }\r\n\r\n    static matchColor(string) {\r\n        const regex = /(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)/ig;\r\n        const match = !!string.match(regex) ? string.match(regex)[0] : null;\r\n        return match;\r\n    }\r\n}\r\n\r\nexport default ColorMutator;","import DefaultMutator from './DefaultMutator';\r\nimport TransformMutator from './TransformMutator';\r\nimport ColorMutator from './ColorMutator';\r\n\r\nclass Mutator {\r\n    constructor(element, key, params) {\r\n        const mutatorType = Mutator.mutatorTypes[key];\r\n\r\n        switch (mutatorType) {\r\n            case 'transform':\r\n                return new TransformMutator(element, key, params);     \r\n            case 'color':\r\n                return new ColorMutator(element, key, params);\r\n            default:\r\n                return new DefaultMutator(element, key, params);\r\n        }\r\n    }\r\n}\r\n\r\nMutator.mutatorTypes = {\r\n    y: 'transform',\r\n    translateY: 'transform',\r\n    x: 'transform',\r\n    translateX: 'transform',\r\n    z: 'transform',\r\n    translateZ: 'transform',\r\n    r: 'transform',\r\n    rotate: 'transform',\r\n    scale: 'transform',\r\n    color: 'color',\r\n    backgroundColor: 'color',\r\n    borderColor: 'color'\r\n}\r\n\r\nexport default Mutator;","import { ObserverDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Mutator from './Mutators/Mutator';\r\n\r\nclass Observer {\r\n    constructor(element, mutators, params) {\r\n        const w = this;\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.element = element;\r\n        w.queue = {\r\n            mutators: mutators || {}\r\n        }\r\n        w.mutators = {};\r\n        w.scroll = {\r\n            current: 0,\r\n            start: undefined,\r\n            end: undefined,\r\n            diff: undefined,\r\n            progress: 0\r\n        };\r\n\r\n        w.isDone = false;\r\n\r\n        w.init();\r\n    }\r\n\r\n    get progress() {\r\n        const w = this;\r\n        const progress = Math.min(Math.max((Math.round(w.scroll.current) - w.scroll.start) / w.scroll.diff, 0), 1);\r\n        w.element.setAttribute(`data-progress-${w.params.name}`, progress);\r\n        return progress;\r\n    }\r\n\r\n    applyMutations(styles) {\r\n        const w = this;\r\n        _.each(styles, cssProperty => {\r\n            const style = styles[cssProperty].join(' ');\r\n            w.element.style[cssProperty] = style;\r\n        });\r\n        w.isDone = w.progress == 0 || w.progress == 1;\r\n    }\r\n\r\n    getMutationsStyles() {\r\n        const w = this;\r\n        const styles = {};\r\n        _.each(w.mutators, key => {\r\n            const mutator = w.mutators[key];\r\n            styles[key] = {\r\n                cssProperty: mutator.cssProperty,\r\n                cssValue: mutator.style\r\n            }\r\n        });\r\n        return styles;\r\n    }\r\n\r\n    getMutation(key) {\r\n        const w = this;\r\n        const progress = w.progress;\r\n        if (progress > 0 && progress < 1) {\r\n            w.isDone = false;\r\n        }\r\n        w.mutators[key].tween(w.progress);\r\n    }\r\n\r\n    getMutations() {\r\n        const w = this;\r\n        _.each(w.mutators, key => {\r\n            w.getMutation(key);\r\n        });\r\n    }\r\n\r\n    addMutator(key, params) {\r\n        const w = this;\r\n        try {\r\n            if (w.mutators[key] === undefined) {\r\n                w.mutators[key] = new Mutator(w.element, key, params);\r\n            } else {\r\n                throw `Mutator '${key}' already exist on '${w.name}' observer. Try update() instead`;\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    addMutators(mutators) {\r\n        const w = this;\r\n        _.each(mutators, key => {\r\n            w.addMutator(key, mutators[key]);\r\n        });\r\n    }\r\n\r\n    init() {\r\n        const w = this;\r\n        w._initScroll();\r\n        w._initMutators();\r\n    }\r\n\r\n    _initMutators() {\r\n        const w = this;\r\n        w.addMutators(w.queue.mutators);\r\n        w.queue.mutators = {};\r\n    }\r\n\r\n    _initScroll() {\r\n        const w = this;\r\n\r\n        const elementHeight = w.element.offsetHeight;\r\n        const viewportHeight = document.body.clientHeight;\r\n\r\n        const startEdgeDistance = w.params.edge === 'bottom' ? elementHeight : 0;\r\n        const endEgdeDistance =  w.params.edge === 'both' ? elementHeight : 0;\r\n        const startDistance = w.element.offsetTop + startEdgeDistance;\r\n\r\n        const start = Math.floor(startDistance - viewportHeight * w.params.from);\r\n        const end = Math.ceil(startDistance + endEgdeDistance - viewportHeight * w.params.to);\r\n\r\n        w.scroll = {\r\n            current: window.scrollY || 0,\r\n            start: start,\r\n            end: end,\r\n            diff: end - start\r\n        }\r\n    }  \r\n}\r\n\r\nexport default Observer;","import { WonderscrollDefaults as defaults } from './defaults';\r\nimport _ from './utils';\r\nimport Observer from './Observer';\r\n\r\nclass Wonderscroll {\r\n\r\n    constructor(...args) {\r\n        const w = this;\r\n        let element;\r\n        let observers;\r\n        let params;\r\n\r\n        if (args.length < 3 && (_.isPlainObject(args[0]) || _.isPlainArray(args[0]))) {\r\n            [observers, params] = args;\r\n        } else {\r\n            [element, observers, params] = args;\r\n        }\r\n\r\n        w.params = _.merge(defaults.params, params);\r\n        w.queue = {\r\n            element: element || w.params.defaultElement,\r\n            observers: _.forceArray(observers).map(observer => {\r\n                return _.merge(defaults.observers, observer)\r\n            })\r\n        }\r\n        w.element = undefined;\r\n        w.observers = [];\r\n        w.raf = 0;\r\n        w.scrollPos = 0;\r\n        w.scrollHandler = w._handleScroll.bind(this);\r\n        w.isInitiating = false;\r\n        w.isInited = false;\r\n        w.isOnScreen = false;\r\n        w.isListeningScroll = false;\r\n        w.isActive = true;\r\n        \r\n\r\n        if (!!w.params.init) {\r\n            const initElement = w.init();\r\n            if (!!initElement && initElement.length > 1) {\r\n                return initElement;\r\n            }\r\n        }\r\n    }\r\n\r\n    get activeObservers() {\r\n        const w = this;\r\n        const observers = [];\r\n        _.each(w.observers, observer => {\r\n            \r\n            if (!observer.isDone) {\r\n                observers.push(observer);\r\n            }\r\n        });\r\n        w.isActive = !!observers.length && observers.length > 0;\r\n        return observers;\r\n    }\r\n    \r\n    update(key) {\r\n        const w = this;\r\n\r\n        // Get mutations data\r\n        w.getMutations();\r\n        \r\n        // Apply mutations\r\n        if (!!w.isActive) {\r\n            window.cancelAnimationFrame(w.raf);\r\n            w.raf = window.requestAnimationFrame(w.applyMutations.bind(w));\r\n        } else if (!w.isOnScreen) {\r\n            w.isListeningScroll = false;\r\n            window.removeEventListener('scroll', w.scrollHandler);\r\n        }\r\n    }\r\n\r\n    getMutations() {\r\n        const w = this;\r\n\r\n        _.each(w.observers, observer => {\r\n            observer.scroll.current = w.scrollPos;\r\n            observer.getMutations();\r\n            if (!observer.isDone) {\r\n                w.isActive = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    applyMutations() {\r\n        const w = this;\r\n        const styles = {};\r\n        const cssStyles = {};\r\n        let hasActiveObservers = false;\r\n        _.each(w.observers, observer => {\r\n            \r\n            const progress = observer.progress;\r\n            const isDone = progress == 0 || progress == 1;\r\n\r\n            const observerStyles = observer.getMutationsStyles();\r\n\r\n            _.each(observerStyles, key => {\r\n                const style = observerStyles[key];\r\n                if (!styles[key] || !isDone) {\r\n                    styles[key] = style;\r\n                }\r\n            });\r\n            \r\n            observer.isDone = isDone;\r\n            if (!isDone) {\r\n                hasActiveObservers = true;\r\n            }\r\n        });\r\n        _.each(styles, key => {\r\n            const style = styles[key];\r\n            cssStyles[style.cssProperty] = _.isPlainArray(cssStyles[style.cssProperty]) ? cssStyles[style.cssProperty] : [];\r\n            cssStyles[style.cssProperty].push(style.cssValue);\r\n        });\r\n        _.each(cssStyles, cssProperty => {\r\n            const style = cssStyles[cssProperty].join(' ');\r\n            w.element.style[cssProperty] = style;\r\n        });\r\n        w.isActive = hasActiveObservers;\r\n    }\r\n\r\n    addObserver(mutators, params) {\r\n        const w = this;\r\n        const target = !!w.isInited || !!w.isInitiating ? w.observers : w.queue.observers;\r\n        \r\n        const hasCustomName = !!params && !!params.name && typeof params.name === 'string';\r\n        const genericName = String(w.params.observerNamePrefix) + w.observers.length;\r\n        params.name = hasCustomName ? params.name : genericName;\r\n        const observer = new Observer(w.element, mutators, params);\r\n            \r\n        target.push(observer);    \r\n    }\r\n\r\n    addObservers(observers) {\r\n        const w = this;\r\n        _.each(observers, observer => {\r\n            w.addObserver(observer.mutators, observer.params);\r\n        });\r\n    }\r\n\r\n    _handleIntersecting(e) {\r\n        const w = this;\r\n        w.isOnScreen = !!e[0].isIntersecting;\r\n\r\n        if (!!w.isOnScreen && !w.isListeningScroll) {\r\n            w.isListeningScroll = true;\r\n            window.addEventListener('scroll', w.scrollHandler);\r\n        }\r\n    }\r\n\r\n    _handleScroll() {\r\n        const w = this;\r\n        w.scrollPos = window.scrollY;\r\n        w.update(); \r\n    }   \r\n\r\n    init() {\r\n        const w = this;\r\n        w.isInitiating = true;\r\n        w._initElement();\r\n        if (w.element.length > 1) {\r\n            const elements = [];\r\n            w.element.forEach(el => {\r\n                elements.push(new Wonderscroll(el, w.queue.observers, w.params));\r\n            });\r\n            return elements;\r\n        }\r\n        w._initObservers();\r\n        w.intersectionObserver = new IntersectionObserver((e) => w._handleIntersecting(e));\r\n        w.intersectionObserver.observe(w.element);\r\n        if (!!w.params.updateOnInit) {\r\n            w.update();    \r\n        }\r\n        w.isInited = true;\r\n    }\r\n\r\n    _initElement() {\r\n        const w = this;\r\n        const element = _.queryElement(w.queue.element);\r\n        \r\n        w.element = element;\r\n        w.queue.element = null;\r\n    }\r\n\r\n    _initObservers() {\r\n        const w = this;\r\n        w.addObservers(w.queue.observers);\r\n        w.queue.observers = [];\r\n    }\r\n}\r\n\r\nexport default Wonderscroll;"],"names":["ColorMutatorDefaults","params","unit","ease","MutatorDefaults","ObserverDefaults","name","undefined","root","from","to","edge","direction","WonderscrollDefaults","observers","init","observerNamePrefix","defaultElement","updateOnInit","updateOnResize","_","each","enumerable","callback","array","isPlainObject","Object","keys","forceArray","forEach","item","value","Array","isArray","merge","target","args","arg","queryElement","element","el","Element","document","querySelectorAll","length","error","console","isObject","constructor","isPlainArray","linear","t","InQuad","OutQuad","InOutQuad","InCubic","OutCubic","InOutCubic","InQuart","OutQuart","InOutQuart","InQuint","OutQuint","InOutQuint","DefaultMutator","key","w","defaults","cssProperty","progress","_initEase","easeFx","easing","TransformMutator","options","customFormat","format","replace","y","x","z","r","ColorMutator","map","i","colors","_initColors","toRGB","mode","alpha","string","color","getMode","fromHex","fromHSL","fromRGB","rgb","matchColor","startIndex","search","hex","slice","values","match","parseInt","indexOf","endIndex","split","v","Number","regex","Mutator","mutatorType","mutatorTypes","translateY","translateX","translateZ","rotate","scale","backgroundColor","borderColor","Observer","mutators","queue","scroll","current","start","end","diff","isDone","styles","style","join","mutator","cssValue","tween","getMutation","addMutator","_initScroll","_initMutators","addMutators","elementHeight","offsetHeight","viewportHeight","body","clientHeight","startEdgeDistance","endEgdeDistance","startDistance","offsetTop","Math","floor","ceil","window","scrollY","min","max","round","setAttribute","Wonderscroll","observer","raf","scrollPos","scrollHandler","_handleScroll","bind","isInitiating","isInited","isOnScreen","isListeningScroll","isActive","initElement","getMutations","cancelAnimationFrame","requestAnimationFrame","applyMutations","removeEventListener","cssStyles","hasActiveObservers","observerStyles","getMutationsStyles","push","hasCustomName","genericName","String","addObserver","e","isIntersecting","addEventListener","update","_initElement","elements","_initObservers","intersectionObserver","IntersectionObserver","_handleIntersecting","observe","addObservers"],"mappings":"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"}